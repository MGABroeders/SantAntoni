<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reserveringen - Familie Sant Antoni</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="header-top">
      <button class="menu-toggle" id="menuToggle" onclick="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <h1><a href="index.html">Appartementen Sant Antoni</a></h1>
      <div class="header-right">
        <a href="contact.html" class="header-link">Contact</a>
        <span id="authNav"></span>
      </div>
    </div>
    <nav id="mainNav" class="main-nav">
      <a href="index.html">Home</a>
      <a href="kalender.html">Reserveren</a>
      <a href="fotos.html">Foto's</a>
      <a href="berichten.html">Berichten</a>
    </nav>
  </header>

  <section id="kalender">
    <h2>Reserveringen</h2>
    
    <div class="reservation-form-container">
      <div class="form-section">
        <h3>Nieuwe Reservering</h3>
        
        <!-- Pre-filled info (read-only when logged in) -->
        <div id="userInfo" class="user-info-display" style="display: none;">
          <div class="info-row"><strong>Naam:</strong> <span id="userName"></span></div>
          <div class="info-row"><strong>Email:</strong> <span id="userEmail"></span></div>
          <div class="info-row"><strong>Appartement:</strong> <span id="userAppartment"></span></div>
          <div class="info-row"><strong>Aankomst:</strong> <span id="userAankomst"></span></div>
          <div class="info-row"><strong>Vertrek:</strong> <span id="userVertrek"></span></div>
        </div>
        
        <form id="reservationForm">
          <div class="form-group">
            <label for="appartement">Appartement:</label>
            <select id="appartement" required>
              <option value="">Selecteer appartement</option>
              <option value="A">Appartement 35</option>
              <option value="B">Appartement 36</option>
            </select>
          </div>
          <div class="form-group" id="naamField">
            <label for="naam">Naam:</label>
            <input type="text" id="naam" required placeholder="Vul je naam in">
          </div>
          <div class="form-group" id="emailField">
            <label for="email">E-mailadres:</label>
            <input type="email" id="email" required placeholder="jouw@email.nl">
          </div>
          <div class="form-group">
            <label for="aankomst">Aankomstdatum:</label>
            <input type="date" id="aankomst" required>
          </div>
          <div class="form-group">
            <label for="vertrek">Vertrekdatum:</label>
            <input type="date" id="vertrek" required>
          </div>
          <div class="form-group">
            <label for="personen">Aantal personen:</label>
            <input type="number" id="personen" min="1" max="8" value="2" required>
          </div>
          <div class="form-group">
            <label for="opmerking">Opmerkingen (optioneel):</label>
            <textarea id="opmerking" rows="3" placeholder="Extra informatie..."></textarea>
          </div>
          
          <!-- Price breakdown -->
          <div id="priceDisplay" class="price-display" style="display: none;">
            <h4>Prijs overzicht</h4>
            <div id="priceBreakdown"></div>
          </div>
          
          <!-- Betalingsmelding -->
          <div class="payment-notice" style="margin-top: 1.5em; padding: 1em; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px;">
            <h4 style="margin-top: 0; color: #856404;">⚠️ Belangrijk: Betalingstermijn</h4>
            <p style="margin: 0.5em 0; color: #856404;">
              Om je reservering te bevestigen, moet je <strong>binnen 7 dagen na aanvraag</strong> betalen naar:
            </p>
            <div style="margin: 0.8em 0; padding: 0.8em; background: white; border-radius: 4px; font-family: monospace; font-size: 1.1em; text-align: center; color: #333;">
              <strong>Rekeningnummer: [TE VULLEN]</strong><br>
              <small>t.n.v. Familie Sant Antoni</small>
            </div>
            <p style="margin: 0.5em 0; color: #856404;">
              Als je niet binnen 7 dagen betaalt, wordt je reservering automatisch geannuleerd.
            </p>
            <div class="form-group" style="margin-top: 1em;">
              <label style="display: flex; align-items: center; cursor: pointer;">
                <input type="checkbox" id="paymentAgreement" required style="margin-right: 0.5em; width: 20px; height: 20px;">
                <span style="color: #856404; font-weight: bold;">
                  Ik ga akkoord met de betalingsvoorwaarden en begrijp dat mijn reservering wordt geannuleerd als ik niet binnen 7 dagen betaal.
                </span>
              </label>
            </div>
          </div>
          
          <button type="submit" class="btn-primary" style="margin-top: 1.5em;">Reservering aanvragen</button>
        </form>
      </div>
    </div>

    <div class="reservations-list">
      <h3>Huidige Reserveringen</h3>
      <div id="reservationsList"></div>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Familie Sant Antoni</p>
  </footer>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  
  <!-- Firebase Config & Data Layer -->
  <script src="firebase-config.js"></script>
  <script src="firebase-db.js"></script>
  
  <!-- App Scripts -->
  <script src="auth.js"></script>
  <script src="auth-ui.js"></script>
  <script src="script.js"></script>
  
  <!-- Initialize Firebase -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      if (typeof initFirebase === 'function') {
        initFirebase();
        
        // Real-time listeners voor directe updates
        setTimeout(() => {
          // Real-time listener voor reserveringen
          if (typeof subscribeToReservations === 'function') {
            subscribeToReservations((reservations) => {
              console.log('Reserveringen update ontvangen:', reservations.length);
              // Update localStorage
              localStorage.setItem('santantoni_reservations', JSON.stringify(reservations));
              // Herlaad kalender
              if (typeof generateCalendar === 'function') {
                generateCalendar();
              }
              // Herlaad reserveringen lijst
              if (typeof displayReservations === 'function') {
                displayReservations();
              }
            });
          }
          
          // Real-time listener voor berichten
          if (typeof subscribeToMessages === 'function') {
            subscribeToMessages((messages) => {
              console.log('Berichten update ontvangen:', messages.length);
              // Update localStorage
              localStorage.setItem('santantoni_messages', JSON.stringify(messages));
              // Herlaad berichten
              if (typeof displayMessages === 'function') {
                displayMessages();
              }
            });
          }
        }, 2000);
      }
    });
  </script>
</body>
</html>

